<div class="page">
    <h1 class="ui header dividing">Log</h1>
    <p class="message ui">The following table shows all current log messages which are generated by Wirehome.Core or
        other
        services, components etc.</p>

    <div class="ui segment form">
        <h3 class="ui header">Filter</h3>
        <div class=field>
            <label>Included levels</label>
            <div class="inline fields">
                <div class="field">
                    <div class="ui toggle checkbox">
                        <input type="checkbox" [(ngModel)]="includeErrors">
                        <label>Error</label>
                    </div>
                </div>
                <div class="field">
                    <div class="ui toggle checkbox">
                        <input type="checkbox" [(ngModel)]="includeWarnings">
                        <label>Warning</label>
                    </div>
                </div>
                <div class="field">
                    <div class="ui toggle checkbox">
                        <input type="checkbox" [(ngModel)]="includeInformations">
                        <label>Information</label>
                    </div>
                </div>
            </div>
        </div>

        <div class=field>
            <label>Max entries for load</label>
            <div class="inline fields">
                <div class="field">
                    <input type="number" placeholder="Take count" [(ngModel)]="takeCount">
                </div>
            </div>
        </div>
        <div class="field">
            <button class="ui button teal" (click)="loadLogItems()">Apply filter</button>
        </div>
    </div>

    <button class="ui button red" (click)="clearLogItems()">Clear log</button>

    <table class="ui celled table">
        <thead>
            <tr>
                <th>Level</th>
                <th>Timestamp (UTC)</th>
                <th>Message</th>
                <th>Exception</th>
                <th>Source</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let item of logEntries" [class.negative]="item.level === logLevels.Error"
                [class.warning]="item.level === logLevels.Warning"
                [class.positive]="item.level === logLevels.Information">
                <td class="collapsing center aligned"><i class="fas"
                        [class.fa-exclamation]="item.level === logLevels.Error"
                        [class.fa-exclamation-triangle]="item.level === logLevels.Warning"
                        [class.fa-info]="item.level === logLevels.Information"></i></td>
                <td class="collapsing code">
                    {{item.timestamp | date:'yyyy/MM/dd'}}<br />{{item.timestamp | date:'HH:mm:ss.SSS'}}
                </td>
                <td class="code">
                    {{item.message}}
                </td>
                <td class="collapsing code"><button class="ui button compact" *ngIf="item.exception !== null"
                        (click)="showException(item)">Show</button></td>
                <td class="collapsing code">{{item.source}}</td>
            </tr>
        </tbody>
    </table>

    <div class="ui modal logEntryExceptionModal">
        <i class="close icon"></i>
        <div class="header">
            Exception
        </div>
        <div class="content">
            <div class="description code">
                {{selectedLogEntry?.exception}}
            </div>
        </div>
        <div class="actions">
            <div class="ui button teal" (click)="copyExceptionToClipboard()">
                Copy
            </div>
            <div class="ui approve button">
                Close
            </div>
        </div>
    </div>
</div>